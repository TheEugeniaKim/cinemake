<br>
<%= form_with url: search_path, local: true, method: 'get' do |f| %> 
    <%= f.label "Search: " %>
    <%= f.text_field :search, value: @search%>
    <%= f.select :category, options_for_select(["Movies", "Directors", "Actors", "Writers"]), :selected => @category %>
    <%= f.submit "Filter" %>
<% end %>

<h2>Search Results:</h2>
<%if @category %>
    <h2>"<%=@search%>" in <%=@category%></h2><br><br>
    <%if @category == "Movies"%>
        <%if Movie.downcase_names.any?{|name| name.include?(@search.downcase)}%>
            <% Movie.all.select{|movie|movie.name.downcase.include?(@search.downcase)}.each do |movie| %>
                <div><h3><%= link_to "#{movie.name} (#{movie.release_year})", movie_path(movie) %></h3>
                <p><%= "Directed by: #{movie.director_names.join(", ")}"%></p>
                <p><%= movie.short_synopsis %></p></div><br>
            <% end %>
        <% else %>
            No Results Found
        <% end %>
    <%elsif @category == "Directors"%>
        <% if Director.names.any?{|name| name.downcase.include?(@search.downcase)} %>
        
            <div class="person_search"><% Director.all.select{|director|director.name.downcase.include?(@search.downcase)}.each do |director| %>

                <div class="card" style="width: 18rem;">
                        <img src="<%=director.image%>" class="card-img-top" alt="...">
                        <div class="card-body">
                        <h5 class="card-title"><%= link_to "#{director.name}", director_path(director) %></h5>
                        <% if director.movies.empty? %>
                            <div class="card-text">Ready to Start Making Movies</div>
                        <% else %>
                            <% r_movie = director.movies.sample %>
                            <div class="card-text"><%= "Known for: #{r_movie.name} (#{r_movie.release_year})"%></div>
                        <% end %>
                        </div>
                </div>
            <% end %></div>
        <% else %>
            No Results Found
        <% end %>
    <%elsif @category == "Actors"%>
    <%elsif @category == "Writers"%>

    <%end%>



<%else%>
    <h2>"<%=@search%>"</h2>





<%end%>