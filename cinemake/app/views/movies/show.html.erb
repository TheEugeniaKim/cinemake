<h1><%= "#{@movie.name} (#{@movie.release_year})" %></h1>


<h2>Cast and Crew</h2>

<% if @movie.director_ids.include?(session[:user]["id"]) %>
    <br>
    <%= button_to "Search for new Cast and Crew Members", crew_members_search_path %>
    <br>
<% end %>

<div>Directors:
    <% @movie.directors.each do |director|%>
        <%= director.name %> 
    <% end %> </div>

<% if movie.writers.any? %>
    <div>Writers:
    <% @movie.writers.each do |writer|%>
        <%= "#{writer.name}, #{writer.movie_role(@movie).name}" %>
    <% end %> </div>
<% end %>
<% if movie.stars.any? %>
    <div>Stars: 
    <% @movie.stars.each do |actor|%>
        <%= "#{actor.name} (#{actor.movie_role(@movie).name})" %>
    <% end %> </div>
<% end %>
<% link_to "Full Cast and Crew", movie_crew_members_path(@movie) %>
    --------------------------------------------------------------------
<h2>Projects</h2>

<% if @movie.projects.any? %>
    <% @movie.most_recent_three_projects.each do |project| %>
        <div><h3><%= link_to "#{project.name}", project_path(project) %></h3>
        <p>Status: <%= project.status %> Start: <%= project.start_date %> Finish: <%= project.end_date %></p>
        --------------------------------------------------------------------</div>
    <% end %>
    <%= link_to "Show More", movie_projects_path(@movie)%>
<% else %>
    <p>This movie has no projects.
        <% if @movie.director_ids.include?(session[:user]["id"]) %>
        Projects are a great way to keep track of the stuff you need to get done for your movie, from buying props to filming scenes.<br>
        <%= button_to "Add a New Project Now!", new_project_path(@movie) %>
        <% end %></p>
<% end %>

    