<h1><%= "#{@movie.name} (#{@movie.release_year})" %></h1>


<h2>Cast and Crew</h2>

<div class=flex-container>
<% if @movie.director_ids.include?(session[:user]["id"]) %>
    <br>
    <%= button_to "Search for new Cast and Crew Members", crew_members_search_path, method: :get %>
    <br>
<% end %>
</div>
<br>
<div class="flex-container">
    Directors:
    <% @movie.directors.each do |director|%>
        <%= director.name %> 
    <% end %> 
</div>

<br>

<% unless @movie.writers.empty? %>
    <div class ="flex-container">
        Writers:
        <% @movie.writers.each do |writer|%>
            <%= "#{writer.name} (#{writer.movie_role(@movie).name})" %>
        <% end %> 
    </div>
<% end %>

<br>

<% unless @movie.stars.empty? %>
    <div class ="flex-container">
   
        Stars: 
            <%= @movie.star_array.join(",  ") %>
    <% end %>
    <% link_to "Full Cast and Crew", movie_crew_members_path(@movie) %>
        <br>
    
    </div>
    <br>
<div class="flex-container">
<div>
<h2>Projects</h2>

<% if @movie.projects.any? %>
    <% @movie.most_recent_three_projects.each do |project| %>
    <div class="card" style="width: 18rem;">
    <div class="card-body">
        <h4 class="card-title"><%=project.name %></h4>
        <p class="card-text">Status: <%= project.status %> Start: <%= project.start_date %> Finish: <%= project.end_date %></p>
        <a href=<%=project_path(project) %> class="card-link"><%=project.name%></a>
    </div>
    </div>
      <% end %>
    <%= link_to "Show More", movie_projects_path(@movie)%>
<% else %>
    <p>This movie has no projects.
        <% if @movie.director_ids.include?(session[:user]["id"]) %>
        Projects are a great way to keep track of the stuff you need to get done for your movie, from buying props to filming scenes.<br>
        <%= button_to "Add a New Project Now!", new_project_path(@movie), method: :get %>
        <% end %></p>
<% end %>
</div>
</div>
    